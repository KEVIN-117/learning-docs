## Redundancia en redes conmutadas de capa 2
La redundancia es una parte muy importante de dise침o jer치rquico lo cual permite eliminar puntos 칰nicos de falla. Las redes redundantes requiere la adici칩n de rutas f칤sicas, pero las rutas redundantes en una red `Ethernet` puede causar bucles f칤sicos y l칩gicos en la capa 2.

Las LAN Ethernet requieren una topolog칤a sin bucles con una 칰nica ruta entre dos dispositivos. Un bucle en una LAN Ethernet puede provocar una propagaci칩n continua de tramas Ethernet hasta que un enlace se interrumpe y interrumpa el bucle

## Protocolo de 치rbol de expansi칩n
Es un protocolo de red de prevenci칩n de bucles que permite redundancia mientras crea una topolog칤a de capa 2 sin bucles

### STP Operaci칩n Normal
![[Pasted image 20241103090511.png]]
### Recalcular STP

![[Pasted image 20241103091011.png]]
## Problemas con los v칤nculos de switch redundantes
Cuando existen m칰ltiples rutas entre dos dispositivos en una red Ethernet no hay implementaci칩n de #STP en los conmutadores dando paso a que se produzca un bucle de capa 2 provocando inestabilidad en la tabla de direcciones MAC, saturaci칩n de enlaces y alta utilizaci칩n de CPU en conmutadores y dispositivos finales, lo que hace que la red se vuelva inutilizable.
A diferencia de los protocolos de Capa 3, IPv4 e IPv6, La capa 2 Ethernet no incluye un mecanismo para reconocer y eliminar tramas de bucle sin fin, a differentia de #IPv4 #IPv6 que si tienen un mecanismo que limita la cantidad de veces que un dispositivo de red de Capa 3 puede retransmitir un paquete
- Un router disminuir치 la #TTL en cada paquete IPv4
- Un router disminuir치 el campo limite de saltos en cada paquete IPv6
y Ethernet no tienen un mecanismo comparable para limitar el n칰mero de veces que un switches retransmite una trama de Capa 2. STP fue desarrollado espec칤ficamente como un mecanismo de prevenci칩n de bucles para Ethernet de Capa 2.
## Bucles de la capa 2
Sin #STP habilitado se producen bucles de capa 2, lo que hace que las tramas de #difusi칩n, #multidifusi칩n y #unidifusi칩n_desconocidos se reproduzcan sin fin

![[Pasted image 20241103093811.png]]

## Tormenta de difusi칩n (Broadcast Storm)

Las tormentas de difusi칩n pueden deshabilitar una red en cuesti칩n de segundos al abrumar los conmutadores y los dispositivos finales. Las tormentas de difusi칩n pueden deberse a un problema de hardware como una NIC defectuosa o a un bucle de capa 2 en la red.
![[Pasted image 20241103094703.png]]

## El algoritmo de 치rbol de expansi칩n
 pasos de como la #STP  crea una topolog칤a sin bucles.
 ![[Pasted image 20241103094918.png]]
  1. **Seleccionar el Root Bridge**: En esta topolog칤a, todos los enlaces tienen el mismo costo (mismo ancho de banda). Cada switch determinar치 una 칰nica ruta de menor costo desde s칤 mismo hasta el puente ra칤z.
	  <div class="tip-card">
        <div class="icon">游눠</div>
        <div class="content">
             El puente ra칤z est치 determinado por el ID de puente m치s bajo, que consta del valor de prioridad y la direcci칩n MAC. Debido a que los valores de prioridad de todos los switchs son id칠nticos, la direcci칩n MAC se utiliza para determinar el puente ra칤z. Debido a que S2 tiene la direcci칩n MAC m치s baja, S2 se convierte en el puente ra칤z.
        </div>
    </div>
  ![[Pasted image 20241103095003.png]]
  2.  **Bloquear rutas redundantes**: STP asegura que solo haya una ruta l칩gica entre todos los destinos en la red al bloquear intencionalmente las rutas redundantes que podr칤an causar un bucle
  ![[Pasted image 20241103095248.png]]
  3. **Topolog칤a sin bucle**: 
![[Pasted image 20241103095506.png]]
4. **Fallos de enlaces causan rec치lculo**: Las rutas f칤sicas a칰n existen para proporcionar la redundancia, pero las mismas se deshabilitan para evitar que se generen bucles. Si alguna vez la ruta es necesaria para compensar la falla de un cable de red o de un switch, STP vuelve a calcular las rutas y desbloquea los puertos necesarios para permitir que la ruta redundante se active. Los rec치lculos STP tambi칠n pueden ocurrir cada vez que se agrega un nuevo conmutador o un nuevo v칤nculo entre switches a la red.
![[Pasted image 20241103095632.png]]
## Packet Tracer - Investigar la prevenci칩n de bucles STP
En esta actividad de Packet Tracer, completar치 los siguientes objetivos:

- Cree y configure una red simple de tres conmutadores con STP.
- Ver operaci칩n STP
- Desactive STP y vuelva a ver la operaci칩n.
![[5.1.9-packet-tracer---investigate-stp-loop-prevention_es-XL.pka]]
[[5.1.9-packet-tracer---investigate-stp-loop-prevention_es-XL.pdf]]

## Verifique su comprensi칩n - Prop칩sito de STP

<div class="col-md-8 col-sm-12"><ol><li class="question-container"><span><div id="c9d12290-1c27-11ea-af09-3b2e6521927c" class="text-asset cyu-question" style="position: relative;"><p>쯈u칠 enunciado describe mejor STP?</p></div><div class="question question-correct"><span class="icon-check-outline icon-small status-icon"></span><span>춰Lo tienes!</span></div></span><div class="form-group answer" role="group" aria-label="option-id-c9d12291-1c27-11ea-af09-3b2e6521927c"><label for="question-option-id-c9d12291-1c27-11ea-af09-3b2e6521927c-0-answer-0" class="radio" data-answer="incorrect"><input type="radio" name="question-0" id="question-option-id-c9d12291-1c27-11ea-af09-3b2e6521927c-0-answer-0" aria-label="option-id-c9d12291-1c27-11ea-af09-3b2e6521927c" value="option-id-c9d12291-1c27-11ea-af09-3b2e6521927c" disabled=""><span class="radio__input"></span><span class="radio__label"><div id="c9d12291-1c27-11ea-af09-3b2e6521927c" class="text-asset undefined" style="position: relative;"><p>STP es un protocolo de enrutamiento de capa 2.</p></div></span></label></div><div class="form-group answer" role="group" aria-label="option-id-c9d12292-1c27-11ea-af09-3b2e6521927c"><label for="question-option-id-c9d12292-1c27-11ea-af09-3b2e6521927c-0-answer-1" class="radio" data-answer="incorrect"><input type="radio" name="question-0" id="question-option-id-c9d12292-1c27-11ea-af09-3b2e6521927c-0-answer-1" aria-label="option-id-c9d12292-1c27-11ea-af09-3b2e6521927c" value="option-id-c9d12292-1c27-11ea-af09-3b2e6521927c" disabled=""><span class="radio__input"></span><span class="radio__label"><div id="c9d12292-1c27-11ea-af09-3b2e6521927c" class="text-asset undefined" style="position: relative;"><p>STP es un protocolo de enrutamiento de capa 3 para LAN Ethernet.</p></div></span></label></div><div class="form-group answer" role="group" aria-label="option-id-c9d12293-1c27-11ea-af09-3b2e6521927c"><label for="question-option-id-c9d12293-1c27-11ea-af09-3b2e6521927c-0-answer-2" class="radio" data-answer="correct"><input type="radio" name="question-0" id="question-option-id-c9d12293-1c27-11ea-af09-3b2e6521927c-0-answer-2" aria-label="option-id-c9d12293-1c27-11ea-af09-3b2e6521927c" value="option-id-c9d12293-1c27-11ea-af09-3b2e6521927c" disabled=""><span class="radio__input"></span><span class="radio__label"><div id="c9d12293-1c27-11ea-af09-3b2e6521927c" class="text-asset undefined" style="position: relative;"><p>STP es un protocolo de prevenci칩n de bucle de Capa 2 para LAN Ethernet.</p></div></span></label></div><div class="form-group answer" role="group" aria-label="option-id-c9d149a0-1c27-11ea-af09-3b2e6521927c"><label for="question-option-id-c9d149a0-1c27-11ea-af09-3b2e6521927c-0-answer-3" class="radio" data-answer="incorrect"><input type="radio" name="question-0" id="question-option-id-c9d149a0-1c27-11ea-af09-3b2e6521927c-0-answer-3" aria-label="option-id-c9d149a0-1c27-11ea-af09-3b2e6521927c" value="option-id-c9d149a0-1c27-11ea-af09-3b2e6521927c" disabled=""><span class="radio__input"></span><span class="radio__label"><div id="c9d149a0-1c27-11ea-af09-3b2e6521927c" class="text-asset undefined" style="position: relative;"><p>STP es un protocolo de prevenci칩n de bucle de capa 3 para redes IP.</p></div></span></label></div></li><li class="question-container"><span><div id="c9d149a1-1c27-11ea-af09-3b2e6521927c" class="text-asset cyu-question" style="position: relative;"><p>Sin STP en la LAN Ethernet, 쯤u칠 tres tipos de tramas podr칤an causar un bucle catastr칩fico en la red? (Escoja tres opciones).</p></div><div class="question question-correct"><span class="icon-check-outline icon-small status-icon"></span><span>춰Lo tienes!</span></div></span><div class="form-group answer" role="group" aria-label="option-id-c9d149a2-1c27-11ea-af09-3b2e6521927c"><label for="question-option-id-c9d149a2-1c27-11ea-af09-3b2e6521927c-1-answer-0" class="checkbox" data-answer="incorrect"><input type="checkbox" name="question-1" id="question-option-id-c9d149a2-1c27-11ea-af09-3b2e6521927c-1-answer-0" aria-label="option-id-c9d149a2-1c27-11ea-af09-3b2e6521927c" value="option-id-c9d149a2-1c27-11ea-af09-3b2e6521927c" disabled=""><span class="checkbox__input"></span><span class="checkbox__label"><div id="c9d149a2-1c27-11ea-af09-3b2e6521927c" class="text-asset undefined" style="position: relative;"><p>Unidifusi칩n</p></div></span></label></div><div class="form-group answer" role="group" aria-label="option-id-c9d170b0-1c27-11ea-af09-3b2e6521927c"><label for="question-option-id-c9d170b0-1c27-11ea-af09-3b2e6521927c-1-answer-1" class="checkbox" data-answer="correct"><input type="checkbox" name="question-1" id="question-option-id-c9d170b0-1c27-11ea-af09-3b2e6521927c-1-answer-1" aria-label="option-id-c9d170b0-1c27-11ea-af09-3b2e6521927c" value="option-id-c9d170b0-1c27-11ea-af09-3b2e6521927c" disabled=""><span class="checkbox__input"></span><span class="checkbox__label"><div id="c9d170b0-1c27-11ea-af09-3b2e6521927c" class="text-asset undefined" style="position: relative;"><p>Unidifusi칩n desconocida</p></div></span></label></div><div class="form-group answer" role="group" aria-label="option-id-c9d170b1-1c27-11ea-af09-3b2e6521927c"><label for="question-option-id-c9d170b1-1c27-11ea-af09-3b2e6521927c-1-answer-2" class="checkbox" data-answer="correct"><input type="checkbox" name="question-1" id="question-option-id-c9d170b1-1c27-11ea-af09-3b2e6521927c-1-answer-2" aria-label="option-id-c9d170b1-1c27-11ea-af09-3b2e6521927c" value="option-id-c9d170b1-1c27-11ea-af09-3b2e6521927c" disabled=""><span class="checkbox__input"></span><span class="checkbox__label"><div id="c9d170b1-1c27-11ea-af09-3b2e6521927c" class="text-asset undefined" style="position: relative;"><p>Multidifusi칩n</p></div></span></label></div><div class="form-group answer" role="group" aria-label="option-id-c9d170b2-1c27-11ea-af09-3b2e6521927c"><label for="question-option-id-c9d170b2-1c27-11ea-af09-3b2e6521927c-1-answer-3" class="checkbox" data-answer="correct"><input type="checkbox" name="question-1" id="question-option-id-c9d170b2-1c27-11ea-af09-3b2e6521927c-1-answer-3" aria-label="option-id-c9d170b2-1c27-11ea-af09-3b2e6521927c" value="option-id-c9d170b2-1c27-11ea-af09-3b2e6521927c" disabled=""><span class="checkbox__input"></span><span class="checkbox__label"><div id="c9d170b2-1c27-11ea-af09-3b2e6521927c" class="text-asset undefined" style="position: relative;"><p>Difusi칩n</p></div></span></label></div></li><li class="question-container"><span><div id="c9d170b3-1c27-11ea-af09-3b2e6521927c" class="text-asset cyu-question" style="position: relative;"><p>쯈u칠 dispositivo es elegido por el algoritmo de 치rbol de expansi칩n al que todos los dem치s conmutadores determinan una 칰nica ruta de menor costo?</p></div><div class="question question-correct"><span class="icon-check-outline icon-small status-icon"></span><span>춰Lo tienes!</span></div></span><div class="form-group answer" role="group" aria-label="option-id-c9d197c0-1c27-11ea-af09-3b2e6521927c"><label for="question-option-id-c9d197c0-1c27-11ea-af09-3b2e6521927c-2-answer-0" class="radio" data-answer="correct"><input type="radio" name="question-2" id="question-option-id-c9d197c0-1c27-11ea-af09-3b2e6521927c-2-answer-0" aria-label="option-id-c9d197c0-1c27-11ea-af09-3b2e6521927c" value="option-id-c9d197c0-1c27-11ea-af09-3b2e6521927c" disabled=""><span class="radio__input"></span><span class="radio__label"><div id="c9d197c0-1c27-11ea-af09-3b2e6521927c" class="text-asset undefined" style="position: relative;"><p>Root bridge (Puente ra칤z)</p></div></span></label></div><div class="form-group answer" role="group" aria-label="option-id-c9d197c1-1c27-11ea-af09-3b2e6521927c"><label for="question-option-id-c9d197c1-1c27-11ea-af09-3b2e6521927c-2-answer-1" class="radio" data-answer="incorrect"><input type="radio" name="question-2" id="question-option-id-c9d197c1-1c27-11ea-af09-3b2e6521927c-2-answer-1" aria-label="option-id-c9d197c1-1c27-11ea-af09-3b2e6521927c" value="option-id-c9d197c1-1c27-11ea-af09-3b2e6521927c" disabled=""><span class="radio__input"></span><span class="radio__label"><div id="c9d197c1-1c27-11ea-af09-3b2e6521927c" class="text-asset undefined" style="position: relative;"><p>Puente dedicado</p></div></span></label></div><div class="form-group answer" role="group" aria-label="option-id-c9d197c2-1c27-11ea-af09-3b2e6521927c"><label for="question-option-id-c9d197c2-1c27-11ea-af09-3b2e6521927c-2-answer-2" class="radio" data-answer="incorrect"><input type="radio" name="question-2" id="question-option-id-c9d197c2-1c27-11ea-af09-3b2e6521927c-2-answer-2" aria-label="option-id-c9d197c2-1c27-11ea-af09-3b2e6521927c" value="option-id-c9d197c2-1c27-11ea-af09-3b2e6521927c" disabled=""><span class="radio__input"></span><span class="radio__label"><div id="c9d197c2-1c27-11ea-af09-3b2e6521927c" class="text-asset undefined" style="position: relative;"><p>Gateway predeterminado</p></div></span></label></div><div class="form-group answer" role="group" aria-label="option-id-c9d197c3-1c27-11ea-af09-3b2e6521927c"><label for="question-option-id-c9d197c3-1c27-11ea-af09-3b2e6521927c-2-answer-3" class="radio" data-answer="incorrect"><input type="radio" name="question-2" id="question-option-id-c9d197c3-1c27-11ea-af09-3b2e6521927c-2-answer-3" aria-label="option-id-c9d197c3-1c27-11ea-af09-3b2e6521927c" value="option-id-c9d197c3-1c27-11ea-af09-3b2e6521927c" disabled=""><span class="radio__input"></span><span class="radio__label"><div id="c9d197c3-1c27-11ea-af09-3b2e6521927c" class="text-asset undefined" style="position: relative;"><p>core switch</p></div></span></label></div></li></ol></div>


<div class="toast__message"><div id="c9d1bed1-1c27-11ea-af09-3b2e6521927c" class="text-asset undefined" style="position: relative;"><p>Identific칩 bien las respuestas correctas.</p><ol><li>STP se utiliza para evitar bucles de Capa 2 en LAN Ethernet.</li><li>Sin STP habilitado, las tramas de unidifusi칩n, multidifusi칩n y difusi칩n desconocidas podr칤an hacer un bucle interminable en la red, lo que causar칤a un error catastr칩fico en la red.</li><li>El algoritmo STP elige un root bridge en la LAN. Todos los dem치s switches calculan la ruta de menor costo al root bridge.</li></ol></div><p>Has tenido 3 respuestas correctas de 3.</p></div>

